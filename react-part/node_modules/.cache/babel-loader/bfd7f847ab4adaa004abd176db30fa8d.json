{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/yavit/OneDrive/Desktop/EquityEcho/WatchlistFundamentals/react-part/src/components/Quotes.js\";\nimport React, { Component, Fragment } from 'react';\nimport apiCall from '../util/apiCall';\nimport QuoteSheet from './QuoteSheet';\nexport default class Quotes extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addSymbol = symbol => {\n      const endpoint = \"/api/\".concat(window.sessionStorage.getItem(\"apikey\"), \"/active/add/\").concat(symbol);\n      const promise = apiCall(endpoint, 'get');\n      promise.then(blob => blob.json()).then(json => {\n        this.setState({\n          activeTickers: json.symbols\n        });\n        this.getQuotes(this.state.activeTickers);\n      });\n    };\n\n    this.delSymbol = symbol => {\n      const endpoint = \"/api/\".concat(window.sessionStorage.getItem(\"apikey\"), \"/active/delete/\").concat(symbol);\n      const promise = apiCall(endpoint, 'get');\n      promise.then(blob => blob.json()).then(json => {\n        this.setState({\n          activeTickers: json.symbols\n        });\n        this.getQuotes(this.state.activeTickers);\n      });\n    };\n\n    this.state = {\n      activeQuotes: [],\n      activeTickers: [],\n      error: \"\"\n    };\n    this.checkList();\n  }\n\n  checkList() {\n    console.log(\"cheklist function\");\n    const endpoint = \"/api/\".concat(window.sessionStorage.getItem(\"apikey\"), \"/active/list\");\n    const promise = apiCall(endpoint, 'get');\n    promise.then(blob => blob.json()).then(json => {\n      this.setState({\n        activeTickers: json.symbols\n      });\n    });\n  }\n\n  getQuotes(symbols) {\n    const activeTickers = symbols.join();\n    const endpoint = \"/api/list/\".concat(activeTickers, \"/quote\");\n    const promise = apiCall(endpoint, 'get');\n    promise.then(blob => blob.json()).then(json => {\n      this.setState({\n        activeQuotes: json.quotes\n      });\n    });\n  }\n\n  componentDidUpdate(prevState) {\n    if (this.state.activeTickers) {\n      if (!this.state.activeQuotes || this.state.activeQuotes.length === 0) {\n        this.getQuotes(this.state.activeTickers);\n      }\n    }\n  }\n\n  render() {\n    console.log(\"-----RENDER-----------\", this.state.activeTickers);\n    console.log(\"+++++RENDER+++++++++\", this.state.activeQuotes);\n    let output = React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    });\n\n    if (this.state.activeQuotes) {\n      output = React.createElement(QuoteSheet, {\n        addSymbol: this.addSymbol,\n        delSymbol: this.delSymbol,\n        activeTickers: this.state.activeTickers,\n        activeQuotes: this.state.activeQuotes,\n        setChartsTicker: this.props.setChartsTicker,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, output);\n  }\n\n  componentDidMount() {\n    console.log(\"did mount\");\n\n    if (this.state.activeTickers && this.state.activeTickers.length === 0) {\n      this.checkList();\n    }\n  }\n\n}","map":{"version":3,"sources":["/mnt/c/Users/yavit/OneDrive/Desktop/EquityEcho/WatchlistFundamentals/react-part/src/components/Quotes.js"],"names":["React","Component","Fragment","apiCall","QuoteSheet","Quotes","constructor","props","addSymbol","symbol","endpoint","window","sessionStorage","getItem","promise","then","blob","json","setState","activeTickers","symbols","getQuotes","state","delSymbol","activeQuotes","error","checkList","console","log","join","quotes","componentDidUpdate","prevState","length","render","output","setChartsTicker","componentDidMount"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\r\nimport apiCall from '../util/apiCall';\r\nimport QuoteSheet from './QuoteSheet'\r\n\r\n\r\nexport default class Quotes extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        activeQuotes: [],\r\n        activeTickers : [],\r\n        error: \"\"\r\n      };\r\n      this.checkList()\r\n    }\r\n\r\n    checkList() {\r\n      console.log(\"cheklist function\")\r\n      const endpoint = `/api/${window.sessionStorage.getItem(\"apikey\")}/active/list`\r\n      const promise = apiCall(endpoint,'get')\r\n      promise.then(blob => blob.json()).then(json => {\r\n        this.setState({\r\n          activeTickers: json.symbols\r\n        })\r\n      })\r\n    }\r\n\r\n    getQuotes (symbols) {\r\n      const activeTickers = symbols.join()\r\n      const endpoint = `/api/list/${activeTickers}/quote`\r\n      const promise = apiCall(endpoint,'get')\r\n      promise.then(blob => blob.json()).then (json=> {\r\n        this.setState({\r\n          activeQuotes: json.quotes\r\n        })\r\n      })\r\n    }\r\n\r\n    addSymbol=(symbol) =>{\r\n      const endpoint = `/api/${window.sessionStorage.getItem(\"apikey\")}/active/add/${symbol}`\r\n      const promise = apiCall(endpoint,'get')\r\n      promise.then(blob => blob.json()).then(json => {\r\n      this.setState({activeTickers: json.symbols})\r\n      this.getQuotes(this.state.activeTickers)\r\n       })\r\n    }\r\n\r\n    delSymbol=(symbol) =>{\r\n      const endpoint = `/api/${window.sessionStorage.getItem(\"apikey\")}/active/delete/${symbol}`\r\n      const promise = apiCall(endpoint,'get')\r\n      promise.then(blob => blob.json()).then(json => {\r\n      this.setState({activeTickers: json.symbols})\r\n      this.getQuotes(this.state.activeTickers)\r\n       })\r\n    }\r\n \r\n    componentDidUpdate(prevState) {\r\n        if(this.state.activeTickers){\r\n          if(!this.state.activeQuotes || this.state.activeQuotes.length===0) {\r\n            this.getQuotes(this.state.activeTickers)\r\n          }\r\n        } \r\n      }\r\n    \r\n  render() {\r\n    console.log(\"-----RENDER-----------\", this.state.activeTickers)\r\n    console.log(\"+++++RENDER+++++++++\", this.state.activeQuotes)\r\n    let output = (<Fragment></Fragment>)\r\n    if(this.state.activeQuotes) {\r\n      output=(\r\n        <QuoteSheet\r\n          addSymbol={this.addSymbol}\r\n          delSymbol={this.delSymbol} \r\n          activeTickers={this.state.activeTickers}\r\n          activeQuotes={this.state.activeQuotes}\r\n          setChartsTicker={this.props.setChartsTicker}\r\n        />\r\n      )\r\n    }\r\n    return (\r\n      <div>\r\n        {output}\r\n      </div>\r\n    )\r\n  }\r\n  componentDidMount(){\r\n    console.log(\"did mount\")\r\n    if(this.state.activeTickers && this.state.activeTickers.length===0) {\r\n      this.checkList()\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}