{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/yavit/OneDrive/Desktop/EquityEcho/WatchlistFundamentals/react-part/src/components/Quotes.js\";\nimport React, { Component, Fragment } from 'react';\nimport apiCall from '../util/apiCall';\nimport QuoteSheet from './QuoteSheet';\nexport default class Quotes extends Component {\n  constructor(props) {\n    super(props);\n\n    this.delSymbol = symbol => {\n      const endpoint = \"/api/active/delete/\".concat(symbol);\n      const promise = apiCall(endpoint, 'get');\n      promise.then(blob => blob.json()).then(json => {\n        this.setState({\n          activeTickers: json.symbols\n        });\n      });\n    };\n\n    this.state = {\n      activeQuotes: [],\n      activeTickers: [],\n      error: \"\"\n    };\n    this.checkList();\n  }\n\n  checkList() {\n    console.log(\"checking function running\");\n    const endpoint = \"/api/\".concat(window.sessionStorage.getItem(\"apikey\"), \"/active/list\");\n    const promise = apiCall(endpoint, 'get');\n    promise.then(blob => blob.json()).then(json => {\n      console.log(\"json\", json);\n      this.setState({\n        activeTickers: json.symbols\n      });\n    });\n  }\n\n  getQuotes(symbols) {\n    console.log(\"getQuotes running\", symbols);\n    const activeTickers = symbols.join();\n    const endpoint = \"/api/list/\".concat(activeTickers, \"/quote\");\n    const promise = apiCall(endpoint, 'get');\n    promise.then(blob => blob.json()).then(json => {\n      this.setState({\n        activeQuotes: json.quotes\n      });\n    });\n  }\n\n  addSymbol(symbol) {\n    const endpoint = \"/api/active/add/\".concat(symbol);\n    const promise = apiCall(endpoint, 'get');\n    promise.then(blob => blob.json()).then(json => {\n      if (json.error.length > 0) {\n        alert(json.error);\n      } else {\n        this.setState({\n          activeTickers: json.symbols\n        });\n      }\n    });\n  }\n\n  componentDidUpdate(prevState) {\n    console.log(\"componentDIDmount\");\n\n    if (this.state.activeTickers && this.state.activeTickers.length > 0) {\n      if (!this.state.activeQuotes || this.state.activeQuotes.length === 0) {\n        this.getQuotes(this.state.activeTickers);\n      }\n    }\n  }\n\n  render() {\n    console.log(\"render\");\n    let dummydata = [{\n      \"symbol\": \"AAPL\",\n      \"latestPrice\": 201.24,\n      \"marketCap\": 925921339200,\n      \"avgTotalVolume\": 24728097,\n      \"peRatio\": 16.78,\n      \"open\": 199.05,\n      \"close\": 201.24,\n      \"low\": 198.81,\n      \"high\": 201.51,\n      \"week52Low\": 142,\n      \"week52High\": 233.47,\n      \"change\": 1.22,\n      \"changePercent\": 0.0061,\n      \"ytdChange\": 0.272691\n    }, {\n      \"symbol\": \"TSLA\",\n      \"latestPrice\": 199,\n      \"marketCap\": 925921339199,\n      \"avgTotalVolume\": 24728097,\n      \"peRatio\": 16.78,\n      \"open\": 199.05,\n      \"close\": 201.24,\n      \"low\": 198.81,\n      \"high\": 201.51,\n      \"week52Low\": 142,\n      \"week52High\": 233.47,\n      \"change\": 1.22,\n      \"changePercent\": 0.0061,\n      \"ytdChange\": 0.272691\n    }];\n    let output = React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    });\n\n    if (this.state.activeQuotes) {\n      output = React.createElement(QuoteSheet, {\n        data: dummydata,\n        addSymbol: this.addSymbol,\n        delSymbol: this.delSymbol,\n        activeTickers: this.state.activeTickers,\n        activeQuotes: this.state.activeQuotes,\n        setChartsTicker: this.props.setChartsTicker,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, output);\n  }\n\n}","map":{"version":3,"sources":["/mnt/c/Users/yavit/OneDrive/Desktop/EquityEcho/WatchlistFundamentals/react-part/src/components/Quotes.js"],"names":["React","Component","Fragment","apiCall","QuoteSheet","Quotes","constructor","props","delSymbol","symbol","endpoint","promise","then","blob","json","setState","activeTickers","symbols","state","activeQuotes","error","checkList","console","log","window","sessionStorage","getItem","getQuotes","join","quotes","addSymbol","length","alert","componentDidUpdate","prevState","render","dummydata","output","setChartsTicker"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\r\nimport apiCall from '../util/apiCall';\r\nimport QuoteSheet from './QuoteSheet'\r\n\r\n\r\nexport default class Quotes extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          activeQuotes: [],\r\n          activeTickers : [],\r\n          error: \"\"\r\n        };\r\n        this.checkList()\r\n      }\r\n\r\n    checkList() {\r\n      console.log(\"checking function running\")\r\n        const endpoint = `/api/${window.sessionStorage.getItem(\"apikey\")}/active/list`\r\n        const promise = apiCall(endpoint,'get')\r\n        promise.then(blob => blob.json()).then(json => {\r\n          console.log(\"json\",json)\r\n          this.setState({\r\n            activeTickers: json.symbols\r\n          })\r\n        })\r\n      }\r\n\r\n    getQuotes (symbols) {\r\n        console.log(\"getQuotes running\", symbols)\r\n        const activeTickers = symbols.join()\r\n        const endpoint = `/api/list/${activeTickers}/quote`\r\n        const promise = apiCall(endpoint,'get')\r\n        promise.then(blob => blob.json()).then (json=> {\r\n          this.setState({\r\n            activeQuotes: json.quotes\r\n          })\r\n        })\r\n    }\r\n\r\n    addSymbol(symbol) {\r\n        const endpoint = `/api/active/add/${symbol}`\r\n        const promise = apiCall(endpoint,'get')\r\n        promise.then(blob => blob.json()).then(json => {\r\n          if (json.error.length > 0) {\r\n            alert(json.error)\r\n          } else {\r\n            this.setState({activeTickers: json.symbols})\r\n          }\r\n        })\r\n      }\r\n\r\n      delSymbol=(symbol) =>{\r\n        const endpoint = `/api/active/delete/${symbol}`\r\n        const promise = apiCall(endpoint,'get')\r\n        promise.then(blob => blob.json()).then(json => {\r\n        this.setState({activeTickers: json.symbols})\r\n          })\r\n      }\r\n    \r\n    componentDidUpdate(prevState) {\r\n      console.log(\"componentDIDmount\")\r\n        if(this.state.activeTickers && this.state.activeTickers.length>0){\r\n          if(!this.state.activeQuotes || this.state.activeQuotes.length===0) {\r\n            this.getQuotes(this.state.activeTickers)\r\n          }\r\n        } \r\n      }\r\n    \r\n    \r\n    render() {\r\n      console.log(\"render\")\r\n        let dummydata = [\r\n            {\r\n            \"symbol\": \"AAPL\",\r\n            \"latestPrice\": 201.24,\r\n            \"marketCap\": 925921339200,\r\n            \"avgTotalVolume\": 24728097,\r\n            \"peRatio\": 16.78,\r\n            \"open\": 199.05,\r\n            \"close\": 201.24,\r\n            \"low\": 198.81,\r\n            \"high\": 201.51,\r\n            \"week52Low\": 142,\r\n            \"week52High\": 233.47,\r\n            \"change\": 1.22,\r\n            \"changePercent\": 0.0061,\r\n            \"ytdChange\": 0.272691\r\n            },\r\n            {\r\n              \"symbol\": \"TSLA\",\r\n              \"latestPrice\": 199,\r\n              \"marketCap\": 925921339199,\r\n              \"avgTotalVolume\": 24728097,\r\n              \"peRatio\": 16.78,\r\n              \"open\": 199.05,\r\n              \"close\": 201.24,\r\n              \"low\": 198.81,\r\n              \"high\": 201.51,\r\n              \"week52Low\": 142,\r\n              \"week52High\": 233.47,\r\n              \"change\": 1.22,\r\n              \"changePercent\": 0.0061,\r\n              \"ytdChange\": 0.272691\r\n              }\r\n          ]\r\n\r\n          let output = (<Fragment></Fragment>)\r\n          if(this.state.activeQuotes) {\r\n            output=(\r\n            <QuoteSheet\r\n            data={dummydata}\r\n            addSymbol={this.addSymbol}\r\n            delSymbol={this.delSymbol} \r\n            activeTickers={this.state.activeTickers}\r\n            activeQuotes={this.state.activeQuotes}\r\n            setChartsTicker={this.props.setChartsTicker}\r\n          />\r\n            )\r\n          }\r\n        return (\r\n            <div>\r\n                {output}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}